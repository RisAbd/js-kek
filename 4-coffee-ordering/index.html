<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Coffee Ordering</title>
  <style>
    #kek > button.change-count {
      font-size: 20px;
      padding: 3px 12px;
      margin: 3px;
    }
    #kek > button[type="submit"] {
      font-size: 25px;
      font-weight: lighter;
      padding: 5px 18px;
      margin: 3px;
      margin-top: 30px;
    }
    #kek .label-hint {
      font-style: italic;
      font-size: 0.7rem;
      color: gray;
    }
    #kek .price-per-cup {
      font-size: 1.2rem;
    }
    #output {
      background-color: lightgray;
      color: black;
    }
    .kek-span:hover {
      font-weight: bold;
    }
  </style>
</head>
<body>
  <form id="kek">
    <label for="mek-input">Name: <input id="user-name-input" type="text" name="user-name"></label>
    <br>
    <label><input type="checkbox" name="cream"> add cream <span class="label-hint">(+2$ per cup)</span></label>
    <br>
    <label><input type="checkbox" name="chocolate"> add chocolate <span class="label-hint">(+3$ per cup)</span></label>
    <br>
    <label>Count: <input type="number" name="count" min="1" value="0"></label>
    <br>
    <button class="change-count" type="button" value="-1">-</button>
    <button class="change-count" type="button" value="1">+</button>
    <span class="price-per-cup label-hint">(1 cup = 15$)</span>
    <br>
    <button type="submit">Order</button>
  </form>

  <hr>

  <pre id="output"></pre>

  <hr>


  <script type="text/javascript">

    const orderForm = document.getElementById('kek');
    const outputEl = document.getElementById('output');

    console.log(orderForm, outputEl);
    outputEl.innerText = orderForm.innerHTML;

    function onButtonCountChange(clickEvent) {
      const countInputEl = orderForm.querySelector('input[name="count"]');
      countInputEl.value = Math.max(0, Number(countInputEl.value) + Number(clickEvent.target.value));

      // let countValue = +countInputEl.value;
      // if (clickEvent.target.value === 'plus') {
      //   countValue = countValue+1;
      //   // countValue++;
      //   // countValue += 1;
      // } else if (clickEvent.target.value === 'plus_2') {
      //   countValue += 2;
      // } else {
      //   countValue = Math.max(1, countValue-1);
      // }
      // countValue += +clickEvent.target.value;
    }

    const changeButtons = document.querySelectorAll('button.change-count');

    for (let i = 0; i < changeButtons.length; i++) {
      const button = changeButtons[i];
      console.log(i, button);
      button.addEventListener('click', onButtonCountChange);
    }

    orderForm.addEventListener('change', function (e) {
      console.log(e.target.name, e.target.value, e.target.checked);
    });







  </script>











<script type="text/javascript">


    // const form = document.querySelector('#kek'); //

    // document.getElementById('kek');
    // const output = document.querySelector('#output'); //document.getElementById('kek');
    // console.log(form);

    // form.querySelectorAll('button.change-count').forEach(el => el.addEventListener('click', function (e) {
    //   const v = +form.querySelector('input[name="count"]').value;
    //   form.querySelector('input[name="count"]').value = e.target.innerText === '+' ? v+1 : Math.max(0, v-1);
    //   form.dispatchEvent(new Event('change'));
    // }));

    // form.addEventListener('change', (e) => {
    //   const userName = form.querySelector('input[name="user-name"]').value;
    //   const count = +form.querySelector('input[name="count"]').value;
    //   const addCream = form.querySelector('input[name="cream"]').checked;
    //   const addChocolate = form.querySelector('input[name="chocolate"]').checked;

    //   const totalPrice = count * (15 + (addCream ? 2 : 0) + (addChocolate ? 3 : 0));
    //   const result = {userName, count, addCream, addChocolate, totalPrice};

    //   output.innerText = JSON.stringify(result, null, 2);

    // });

  </script>

</body>
</html>